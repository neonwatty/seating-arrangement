import{j as e,u as $,h as I,a as F,G as L}from"./index-Ch-N2Ac2.js";import{r as u}from"./react-vendor-DSgMQvCA.js";import{G}from"./GuestChip-Ct0O_9Ck.js";import{g as M}from"./groupColors-DijypUJV.js";import"./pdf-export-BqwfyxvF.js";import"./compression-B61UvNVp.js";import"./qrcode-CZEObl3k.js";import"./gesture-BYLw3qxJ.js";import"./dnd-kit-CqfYIfUh.js";function T({guests:n,visibleGroups:a,onToggleGroup:r,onShowAll:d,onHideAll:i}){const[t,j]=u.useState(!1),c=u.useMemo(()=>V(n),[n]);if(c.length===0)return null;const m=l=>a==="all"?!0:a.has(l),p=a==="all"||c.every(l=>a.has(l.key)),h=a!=="all"&&c.every(l=>!a.has(l.key));return e.jsxs("div",{className:"group-legend",children:[e.jsxs("button",{className:"group-legend-header",onClick:()=>j(!t),"aria-expanded":!t,"aria-controls":"group-legend-content",children:[e.jsxs("span",{className:"group-legend-title",children:["Groups (",c.length,")"]}),e.jsx("span",{className:`collapse-icon ${t?"collapsed":""}`,"aria-hidden":"true",children:t?"▶":"▼"})]}),!t&&e.jsxs("div",{id:"group-legend-content",className:"group-legend-content",children:[e.jsxs("div",{className:"legend-actions",children:[e.jsx("button",{className:`legend-action-btn ${p?"disabled":""}`,onClick:d,disabled:p,children:"Show All"}),e.jsx("button",{className:`legend-action-btn ${h?"disabled":""}`,onClick:i,disabled:h,children:"Hide All"})]}),e.jsx("ul",{className:"group-legend-list",role:"list","aria-label":"Guest groups",children:c.map(l=>{const g=m(l.key);return e.jsx("li",{className:"group-legend-item",children:e.jsxs("label",{className:`legend-item-label ${g?"":"hidden-group"}`,children:[e.jsx("input",{type:"checkbox",checked:g,onChange:()=>r(l.key),"aria-label":`${g?"Hide":"Show"} ${l.name}`}),e.jsx("span",{className:"legend-color",style:{backgroundColor:l.color},"aria-hidden":"true"}),e.jsx("span",{className:"legend-name",children:l.name}),e.jsxs("span",{className:"legend-count",children:["(",l.count,")"]})]})},l.key)})})]})]})}function V(n){const a=new Map;n.forEach(i=>{const t=i.group??"";a.set(t,(a.get(t)??0)+1)});const r=[],d=Array.from(a.keys()).sort((i,t)=>i===""?1:t===""?-1:i.localeCompare(t));for(const i of d){const t=a.get(i)??0;r.push({name:i||"Ungrouped",key:i,color:i?M(i)??"#94a3b8":"#94a3b8",count:t})}return r}function W(){const{event:n,sidebarOpen:a,toggleSidebar:r,selectGuest:d,visibleGroups:i,toggleGroupVisibility:t,showAllGroups:j,hideAllGroups:c}=$(),m=I(),[p,h]=u.useState(!1),[l,g]=u.useState(""),[N,k]=u.useState("all"),[b,y]=u.useState("all"),w=[...new Set(n.guests.map(s=>s.group).filter(Boolean))],f=n.guests.filter(s=>{const v=F(s).toLowerCase().includes(l.toLowerCase())||s.company?.toLowerCase().includes(l.toLowerCase()),C=N==="all"||s.group===N,A=b==="all"||s.rsvpStatus===b;return v&&C&&A}),x=f.filter(s=>!s.tableId),S=f.filter(s=>s.tableId),o={total:n.guests.length,confirmed:n.guests.filter(s=>s.rsvpStatus==="confirmed").length,pending:n.guests.filter(s=>s.rsvpStatus==="pending").length,declined:n.guests.filter(s=>s.rsvpStatus==="declined").length,assigned:n.guests.filter(s=>s.tableId).length};return a?e.jsxs(e.Fragment,{children:[m&&a&&e.jsx("div",{className:"sidebar-backdrop",onClick:r}),e.jsxs("div",{className:`sidebar ${m&&a?"open":""}`,children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h2",{children:"Guests"}),e.jsx("button",{className:"sidebar-toggle",onClick:r,children:"▶"})]}),e.jsxs("div",{className:"sidebar-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-value",children:o.total}),e.jsx("span",{className:"stat-label",children:"Total"})]}),e.jsxs("div",{className:"stat confirmed",children:[e.jsx("span",{className:"stat-value",children:o.confirmed}),e.jsx("span",{className:"stat-label",children:"Confirmed"})]}),e.jsxs("div",{className:"stat pending",children:[e.jsx("span",{className:"stat-value",children:o.pending}),e.jsx("span",{className:"stat-label",children:"Pending"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-value",children:o.assigned}),e.jsx("span",{className:"stat-label",children:"Seated"})]})]}),e.jsxs("div",{className:"sidebar-controls",children:[e.jsx("input",{type:"text",placeholder:"Search guests...",value:l,onChange:s=>g(s.target.value),className:"search-input"}),e.jsxs("div",{className:"filter-row",children:[e.jsxs("select",{value:N,onChange:s=>k(s.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Groups"}),w.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:b,onChange:s=>y(s.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"declined",children:"Declined"})]})]}),e.jsx("button",{className:"add-guest-btn",onClick:()=>h(!0),children:"+ Add Guest"})]}),e.jsxs("div",{className:"guest-lists",children:[e.jsxs("div",{className:"guest-list-section",children:[e.jsxs("h3",{children:["Unassigned (",x.length,")"]}),x.length>0&&e.jsx("p",{className:"drag-hint",children:"Drag guests to tables to assign seats"}),e.jsxs("div",{className:"guest-list",children:[x.map(s=>e.jsx(G,{guest:s,onClick:()=>d(s.id)},s.id)),x.length===0&&e.jsx("p",{className:"empty-message",children:f.length===0?"No guests match your filters":"All guests are assigned!"})]})]}),e.jsxs("div",{className:"guest-list-section",children:[e.jsxs("h3",{children:["Assigned (",S.length,")"]}),e.jsx("div",{className:"guest-list",children:S.map(s=>{const v=n.tables.find(C=>C.id===s.tableId);return e.jsxs("div",{className:"assigned-guest-row",children:[e.jsx(G,{guest:s,onClick:()=>d(s.id)}),e.jsx("span",{className:"table-badge",children:v?.name})]},s.id)})})]})]}),e.jsx(T,{guests:n.guests,visibleGroups:i,onToggleGroup:t,onShowAll:j,onHideAll:c}),p&&e.jsx(L,{onClose:()=>h(!1)})]})]}):e.jsxs("button",{className:"sidebar-toggle-collapsed",onClick:r,children:[e.jsx("span",{className:"toggle-icon",children:"◀"}),e.jsx("span",{className:"toggle-label",children:"Guests"}),e.jsx("span",{className:"toggle-count",children:o.total}),e.jsxs("span",{className:"toggle-stats",children:[o.total-o.assigned," unassigned"]})]})}export{W as Sidebar};
